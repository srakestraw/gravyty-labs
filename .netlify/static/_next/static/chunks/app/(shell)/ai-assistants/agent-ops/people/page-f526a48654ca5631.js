(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2422],{6897:function(e,s,t){Promise.resolve().then(t.bind(t,1819))},1819:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return w}});var a=t(7437),n=t(2265),r=t(6140),i=t(8735),l=t(9010),o=t(7604),c=t(4508);function d(e){let{people:s,selectedPersonId:t,onSelectPerson:n,filters:r,onFiltersChange:i}=e;return(0,a.jsxs)("div",{className:"flex h-full flex-col space-y-4 rounded-xl border border-gray-200 bg-white shadow-sm overflow-hidden",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:(0,a.jsx)(l.T,{filters:r,onFiltersChange:i})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===s.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)(o.FontAwesomeIcon,{icon:"fa-solid fa-users-slash",className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"No people found"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Try adjusting your filters"})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:s.map(e=>{let s=e.person.id===t;return(0,a.jsxs)("button",{onClick:()=>n(e.person.id),className:(0,c.cn)("w-full p-4 text-left transition-all duration-150","hover:bg-gray-50 focus:outline-none focus:bg-gray-50",s&&"bg-purple-50 border-l-4 border-purple-500"),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.person.name}),e.person.email&&(0,a.jsx)("div",{className:"text-xs text-gray-500 truncate mt-0.5",children:e.person.email})]}),e.openItemsCount>0&&(0,a.jsx)("span",{className:(0,c.cn)("ml-2 px-2 py-0.5 rounded text-xs font-medium border flex-shrink-0",function(e){switch(e){case"Critical":return"bg-red-100 text-red-700 border-red-200";case"High":return"bg-orange-100 text-orange-700 border-orange-200";case"Medium":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"Low":return"bg-blue-100 text-blue-700 border-blue-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}}(e.highestSeverity)),children:e.highestSeverity})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[e.person.primaryRole&&(0,a.jsx)("span",{children:e.person.primaryRole}),(0,a.jsxs)("span",{className:"font-medium",children:[e.openItemsCount," open"," ",1===e.openItemsCount?"item":"items"]})]})]},e.person.id)})})})]})}var m=t(9376),x=t(7648),u=t(2869),g=t(2430),h=t(5924),p=t(9467),f=t(4045),v=t(8259);function y(e){switch(e){case"Critical":return"bg-red-100 text-red-700 border-red-200";case"High":return"bg-orange-100 text-orange-700 border-orange-200";case"Medium":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"Low":return"bg-blue-100 text-blue-700 border-blue-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}}function j(e){let s=new Date(e),t=new Date().getTime()-s.getTime(),a=Math.floor(t/6e4),n=Math.floor(t/36e5);return a<60?"".concat(a,"m ago"):n<24?"".concat(n,"h ago"):"".concat(Math.floor(t/864e5),"d ago")}let N={Error:"Error",Guardrail:"Guardrail",QuietHours:"Quiet Hours",DoNotEngage:"Do Not Engage",HumanReview:"Human Review",Escalation:"Escalation",FrequencyCap:"Frequency Cap",Task:"Task",OnHold:"On Hold"};function b(e){var s,t,r;let{person:l,assignments:d,queueItems:b,activity:w}=e,I=(0,m.useRouter)(),[C,A]=n.useState("overview");n.useEffect(()=>{A("overview")},[null==l?void 0:l.id]);let k=l?b.filter(e=>"Resolved"!==e.status):[],z=k.length>0?k.reduce((e,s)=>{let t={Critical:4,High:3,Medium:2,Low:1};return(t[s.severity]||0)>(t[e.severity]||0)?s:e},k[0]):null;return l?(0,a.jsxs)("div",{className:"h-full overflow-y-auto rounded-xl border border-gray-200 bg-white shadow-sm",children:[(0,a.jsxs)("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 p-4 space-y-3",children:[(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 truncate",children:l.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 truncate mt-0.5",children:(null===(s=l.contacts.find(e=>e.primary))||void 0===s?void 0:s.value)||(null===(t=l.contacts[0])||void 0===t?void 0:t.value)||"No email"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:l.roles.map(i.cJ).join(" • ")}),z&&(0,a.jsx)("span",{className:(0,c.cn)("px-2 py-0.5 rounded text-xs font-medium border",y(z.severity)),children:z.severity})]})]})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(null===(r=l.doNotEngage)||void 0===r?void 0:r.global)&&(0,a.jsxs)("span",{className:"inline-flex items-center rounded-full bg-red-50 px-2 py-0.5 text-xs font-medium text-red-700",children:[(0,a.jsx)(o.FontAwesomeIcon,{icon:"fa-solid fa-user-slash",className:"h-3 w-3 mr-1"}),"Do Not Engage"]}),b.some(e=>"QuietHours"===e.type)&&(0,a.jsxs)("span",{className:"inline-flex items-center rounded-full bg-yellow-50 px-2 py-0.5 text-xs font-medium text-yellow-700",children:[(0,a.jsx)(o.FontAwesomeIcon,{icon:"fa-solid fa-moon",className:"h-3 w-3 mr-1"}),"Quiet Hours"]}),l.roles.map(e=>(0,a.jsx)("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-700",children:(0,i.cJ)(e)},e))]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>{l&&I.push("/ai-assistants/agent-ops/queue?personId=".concat(encodeURIComponent(l.id)))},className:"text-xs",children:[(0,a.jsx)(o.FontAwesomeIcon,{icon:"fa-solid fa-list",className:"h-3 w-3 mr-1.5"}),"View in Queue"]}),(0,a.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>{l&&I.push("/ai-assistants/logs?scope=person&personId=".concat(encodeURIComponent(l.id)))},className:"text-xs",children:[(0,a.jsx)(o.FontAwesomeIcon,{icon:"fa-solid fa-file-lines",className:"h-3 w-3 mr-1.5"}),"View in Logs"]}),(0,a.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>{l&&console.log("Pause all agents for person:",l.id)},className:"text-xs",children:[(0,a.jsx)(o.FontAwesomeIcon,{icon:"fa-solid fa-pause",className:"h-3 w-3 mr-1.5"}),"Pause All Agents"]}),(0,a.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>{l&&console.log("Add agent for person:",l.id)},className:"text-xs",children:[(0,a.jsx)(o.FontAwesomeIcon,{icon:"fa-solid fa-plus",className:"h-3 w-3 mr-1.5"}),"Add Agent"]}),(0,a.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>{l&&console.log("Create task for person:",l.id)},className:"text-xs",children:[(0,a.jsx)(o.FontAwesomeIcon,{icon:"fa-solid fa-tasks",className:"h-3 w-3 mr-1.5"}),"Create Task"]})]})]}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[d.length>0&&(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Active Agents"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Agents currently engaged with this person."})]}),(0,a.jsx)("div",{className:"space-y-2",children:d.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:e.agentName}),(0,a.jsx)("span",{className:(0,c.cn)("px-2 py-0.5 rounded text-xs font-medium",{active:"bg-green-50 text-green-700",paused:"bg-yellow-50 text-yellow-700",on_hold:"bg-gray-50 text-gray-700"}[e.status]),children:"active"===e.status?"Running":"paused"===e.status?"Paused":"On Hold"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.agentRole}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"•"}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Last activity ",j(e.lastActionAt)]})]})]}),(0,a.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>I.push("/ai-assistants/agents/".concat(e.agentId)),className:"text-xs ml-2 flex-shrink-0",children:"View Agent"})]},e.agentId))})]}),k.length>0&&(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Items Requiring Attention"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Errors, guardrails, human review, and other items this person is involved in."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[k.slice(0,5).map(e=>{var s,t,n,r;return(0,a.jsxs)("div",{className:"flex items-start justify-between p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:(0,c.cn)("px-2 py-0.5 rounded text-xs font-medium border",y(e.severity)),children:e.severity}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:null!==(t=N[s=e.type])&&void 0!==t?t:s}),(0,a.jsx)("span",{className:(0,c.cn)("px-2 py-0.5 rounded text-xs font-medium",function(e){switch(e){case"Open":return"bg-red-50 text-red-700";case"InProgress":return"bg-blue-50 text-blue-700";case"Snoozed":default:return"bg-gray-50 text-gray-700";case"Resolved":return"bg-green-50 text-green-700"}}(e.status)),children:null!==(r=({Open:"Open",InProgress:"In Progress",Snoozed:"Snoozed",Resolved:"Resolved"})[n=e.status])&&void 0!==r?r:n})]}),(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-0.5 line-clamp-1",children:e.summary}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-400",children:[(0,a.jsx)("span",{children:j(e.createdAt)}),e.agentName&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:e.agentName})]})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:"Open"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.z,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>console.log("Resolve:",e.id),children:"Resolve"}),(0,a.jsx)(u.z,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>console.log("Snooze:",e.id),children:"Snooze"})]})})]},e.id)}),k.length>5&&(0,a.jsxs)(x.default,{href:"/ai-assistants/agent-ops/queue?personId=".concat(encodeURIComponent(l.id)),className:"block text-center text-xs text-indigo-600 hover:text-indigo-700 font-medium py-2",children:["View all ",k.length," items in Queue →"]})]})]}),w.length>0&&(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Activity Log"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Recent activity for this person."})]}),(0,a.jsxs)(x.default,{href:"/ai-assistants/logs?scope=person&personId=".concat(encodeURIComponent(l.id)),className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium flex items-center gap-1",children:["View in Logs",(0,a.jsx)(o.FontAwesomeIcon,{icon:"fa-solid fa-arrow-right",className:"h-3 w-3"})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:w.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(0,a.jsx)(o.FontAwesomeIcon,{icon:"email"===e.channel?"fa-solid fa-envelope":"sms"===e.channel?"fa-solid fa-message":"phone"===e.channel?"fa-solid fa-phone":"fa-solid fa-flag",className:"h-4 w-4 text-gray-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}),(0,a.jsx)("div",{className:"text-sm text-gray-900 mt-0.5",children:e.description}),e.agentName&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-0.5",children:["by ",e.agentName]})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(g.d,{activeTab:C,onChange:A}),"overview"===C&&(0,a.jsx)(h.Y,{person:l,queueItems:b,assignments:d},"overview-".concat(l.id)),"activity"===C&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Activity"}),(0,a.jsxs)(x.default,{href:"/ai-assistants/logs?scope=person&personId=".concat(encodeURIComponent(l.id)),className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium flex items-center gap-1",children:["View this person in Logs",(0,a.jsx)(o.FontAwesomeIcon,{icon:"fa-solid fa-arrow-right",className:"h-3 w-3"})]})]}),(0,a.jsx)(p.V,{activity:w})]},"activity-".concat(l.id)),"queue"===C&&(0,a.jsx)(f.b,{items:b},"queue-".concat(l.id)),"guardrails"===C&&(0,a.jsx)(v.G,{person:l},"guardrails-".concat(l.id))]})]})]}):(0,a.jsx)("div",{className:"flex h-full items-center justify-center rounded-xl border border-gray-200 bg-white p-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.FontAwesomeIcon,{icon:"fa-solid fa-user",className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Select a person to view details"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Choose someone from the list to see their details"})]})})}function w(){var e;let s=(0,r.getMockAgentOpsItems)(),[t,l]=(0,n.useState)({role:"All",status:"All",type:"All",severity:"All",assignee:"All",search:""}),[o,c]=(0,n.useState)(null),m=(0,n.useMemo)(()=>s.filter(e=>{if("All"!==t.role&&e.role!==t.role||"All"!==t.status&&e.status!==t.status||"All"!==t.type&&e.type!==t.type||"All"!==t.severity&&e.severity!==t.severity||"Me"===t.assignee&&"user-123"!==e.assignedTo||"Unassigned"===t.assignee&&e.assignedTo)return!1;if(t.search){var s,a,n,r;let i=t.search.toLowerCase();if(!e.title.toLowerCase().includes(i)&&!e.summary.toLowerCase().includes(i)&&!(null===(s=e.person)||void 0===s?void 0:s.name.toLowerCase().includes(i))&&!(null===(n=e.person)||void 0===n?void 0:null===(a=n.email)||void 0===a?void 0:a.toLowerCase().includes(i))&&!(null===(r=e.agentName)||void 0===r?void 0:r.toLowerCase().includes(i)))return!1}return!0}),[s,t]),x=(0,n.useMemo)(()=>{let e=new Map;return m.forEach(s=>{if(!s.person)return;let t=s.person.id;e.has(t)||e.set(t,{person:s.person,items:[],openItems:[],highestSeverity:"Low",openItemsCount:0});let a=e.get(t);a.items.push(s),"Resolved"!==s.status&&a.openItems.push(s)}),e.forEach(e=>{e.highestSeverity=function(e){let s={Critical:4,High:3,Medium:2,Low:1},t="Low",a=0;return e.forEach(e=>{let n=s[e.severity]||0;n>a&&(a=n,t=e.severity)}),t}(e.openItems),e.openItemsCount=e.openItems.length}),Array.from(e.values()).sort((e,s)=>{let t={Critical:4,High:3,Medium:2,Low:1},a=t[e.highestSeverity]||0,n=t[s.highestSeverity]||0;return a!==n?n-a:s.openItems.length-e.openItems.length})},[m]);(0,n.useEffect)(()=>{!o&&x.length>0&&c(x[0].person.id)},[x,o]);let u=o&&null!==(e=(0,i.TZ)(o))&&void 0!==e?e:null,g=u?(0,i.QM)(u.id):[],h=u?(0,i.ne)(u.id):[],p=u?(0,i.W3)(u.id):[];return(0,a.jsxs)("div",{className:"flex h-full flex-col space-y-4",children:[(0,a.jsxs)("header",{className:"space-y-1",children:[(0,a.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"People"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"See how agents are interacting with each person and where attention is needed."})]}),(0,a.jsxs)("div",{className:"grid h-[calc(100vh-164px)] gap-4 grid-cols-1 md:grid-cols-[380px,1fr]",children:[(0,a.jsx)(d,{people:x,selectedPersonId:o,onSelectPerson:c,filters:t,onFiltersChange:l}),(0,a.jsx)(b,{person:u,assignments:g,queueItems:h,activity:p},o||"empty")]})]})}}},function(e){e.O(0,[6137,7648,5552,7106,4727,2854,2971,2117,1744],function(){return e(e.s=6897)}),_N_E=e.O()}]);