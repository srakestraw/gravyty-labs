(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6324],{9358:function(e,t,n){Promise.resolve().then(n.bind(n,9363))},9363:function(e,t,n){"use strict";n.d(t,{InstructorDetailClient:function(){return d}});var r=n(7437),s=n(2265),a=n(7648),i=n(2644),c=n(7604),o=n(2869),l=n(4508);function d(e){let{instructorId:t}=e,[n,d]=(0,s.useState)([]),[u,f]=(0,s.useState)(null),[m,x]=(0,s.useState)(!0),[p,h]=(0,s.useState)(null),[y,g]=(0,s.useState)(null);function v(e){return e&&e.emails&&0!==e.emails.length?(e.emails.find(e=>e.preferred)||e.emails[0]).address:""}if((0,s.useEffect)(()=>{async function e(){try{var e;x(!0),h(null);let n=await (0,i.M8)(t);if(!n){h("Instructor not found");return}f(n);let r=await fetch("/api/banner/academic-periods?status=active"),s=await r.json(),a=(null===(e=s[0])||void 0===e?void 0:e.code)||null;if(g(a),!a){h("No active term found");return}let c=(await (0,i.Gr)({termCode:a})).filter(e=>{var n;return null===(n=e.instructors)||void 0===n?void 0:n.some(e=>e.person.id===t)});d(c)}catch(e){h(e instanceof Error?e.message:"Failed to load instructor data")}finally{x(!1)}}t&&e()},[t]),m)return(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,r.jsx)(c.FontAwesomeIcon,{icon:"fa-solid fa-spinner",className:"animate-spin h-5 w-5"}),(0,r.jsx)("span",{children:"Loading instructor data..."})]})});if(p)return(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(c.FontAwesomeIcon,{icon:"fa-solid fa-exclamation-circle",className:"h-12 w-12 mx-auto mb-4 text-red-500"}),(0,r.jsx)("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:p}),(0,r.jsx)(a.default,{href:"/sis",children:(0,r.jsx)(o.z,{variant:"outline",children:"Back to SIS"})})]});let j=e=>{let t={monday:"M",tuesday:"T",wednesday:"W",thursday:"Th",friday:"F",saturday:"Sa",sunday:"Su"};return e.map(e=>t[e.toLowerCase()]||e).join("")},b=e=>{if(!e)return"";let[t,n]=e.split(":"),r=parseInt(t,10);return"".concat(r%12||12,":").concat(n," ").concat(r>=12?"PM":"AM")};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between border-b border-gray-200 pb-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(a.default,{href:"/sis",children:(0,r.jsx)(o.z,{variant:"ghost",size:"icon",children:(0,r.jsx)(c.FontAwesomeIcon,{icon:"fa-solid fa-arrow-left"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Instructor Schedule"}),u&&(0,r.jsxs)("div",{className:"text-gray-600 mt-1",children:[(0,r.jsx)("p",{className:"font-medium",children:function(e){if(!e||!e.names||0===e.names.length)return"Unknown";let t=e.names.find(e=>e.preferred)||e.names[0],n=[t.given];return t.middle&&n.push(t.middle),n.push(t.family),n.join(" ")}(u)}),v(u)&&(0,r.jsx)("p",{className:"text-sm",children:v(u)})]})]})]})}),y&&(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,r.jsx)(c.FontAwesomeIcon,{icon:"fa-solid fa-calendar",className:"h-5 w-5 text-[#336AEA]"}),"Sections for ",y," (",n.length,")"]}),0===n.length?(0,r.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,r.jsx)(c.FontAwesomeIcon,{icon:"fa-solid fa-chalkboard-teacher",className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,r.jsx)("p",{children:"No sections found for this instructor in the current term"})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border-collapse",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 bg-gray-50",children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"CRN"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Course"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Title"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Schedule"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Room"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Enrollment"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Status"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>{var t;let n="".concat(e.course.subject.code," ").concat(e.course.number),s=e.capacity>0?e.enrolled/e.capacity*100:0;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>window.location.href="/sis/sections/".concat(e.id),children:[(0,r.jsx)("td",{className:"px-4 py-3 text-sm font-mono text-gray-900",children:(0,r.jsx)(a.default,{href:"/sis/sections/".concat(e.id),className:"text-[#336AEA] hover:underline",onClick:e=>e.stopPropagation(),children:e.crn})}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:n}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.title||e.course.title}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.schedule?(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"font-medium",children:j(e.schedule.daysOfWeek)}),e.schedule.startTime&&e.schedule.endTime&&(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[b(e.schedule.startTime)," - ",b(e.schedule.endTime)]})]}):(0,r.jsx)("span",{className:"text-gray-400",children:"TBA"})}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:(null===(t=e.schedule)||void 0===t?void 0:t.room)?(0,r.jsxs)("span",{children:[e.schedule.room.building," ",e.schedule.room.number]}):(0,r.jsx)("span",{className:"text-gray-400",children:"TBA"})}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"text-gray-900",children:[e.enrolled," / ",e.capacity]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,r.jsx)("div",{className:(0,l.cn)("h-1.5 rounded-full transition-all",s>=100?"bg-red-500":s>=80?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(s,100),"%")}})})]})}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,r.jsx)("span",{className:(0,l.cn)("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium","open"===e.status?"bg-green-100 text-green-800":"closed"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status})})]},e.id)})})]})})]})]})}},2644:function(e,t,n){"use strict";n.d(t,{Gr:function(){return a},M8:function(){return l},O8:function(){return u},Wv:function(){return c},b0:function(){return s},gS:function(){return i},l6:function(){return o},tu:function(){return d}});let r="/api/banner";async function s(){let e=await fetch("".concat(r,"/academic-periods"));if(!e.ok)throw Error("Failed to fetch academic periods");return e.json()}async function a(e){let t=new URLSearchParams;(null==e?void 0:e.termCode)&&t.append("termCode",e.termCode),(null==e?void 0:e.academicPeriodId)&&t.append("academicPeriod",e.academicPeriodId),(null==e?void 0:e.courseId)&&t.append("course",e.courseId),(null==e?void 0:e.subject)&&t.append("subject",e.subject),(null==e?void 0:e.status)&&t.append("status",e.status);let n=await fetch("".concat(r,"/sections?").concat(t.toString()));if(!n.ok)throw Error("Failed to fetch sections");return n.json()}async function i(e){let t=new URLSearchParams;(null==e?void 0:e.subjectCode)&&t.append("subject",e.subjectCode),(null==e?void 0:e.status)&&t.append("status",e.status);let n=await fetch("".concat(r,"/courses?").concat(t.toString()));if(!n.ok)throw Error("Failed to fetch courses");return n.json()}async function c(e){let t=await fetch("".concat(r,"/students?id=").concat(e));if(!t.ok)throw Error("Failed to fetch student");return(await t.json())[0]||null}async function o(e){let t=await fetch("".concat(r,"/students?search=").concat(encodeURIComponent(e)));if(!t.ok)throw Error("Failed to search students");return t.json()}async function l(e){let t=await fetch("".concat(r,"/persons?id=").concat(e));if(!t.ok)throw Error("Failed to fetch person");return(await t.json())[0]||null}async function d(e){let t=new URLSearchParams;(null==e?void 0:e.studentId)&&t.append("student",e.studentId),(null==e?void 0:e.sectionId)&&t.append("section",e.sectionId),(null==e?void 0:e.termCode)&&t.append("termCode",e.termCode),(null==e?void 0:e.academicPeriodId)&&t.append("academicPeriod",e.academicPeriodId);let n=await fetch("".concat(r,"/section-registrations?").concat(t.toString()));if(!n.ok)throw Error("Failed to fetch section registrations");return n.json()}async function u(){let e=await i({status:"active"}),t=new Set;return e.forEach(e=>{var n;(null===(n=e.subject)||void 0===n?void 0:n.code)&&t.add(e.subject.code)}),Array.from(t).sort()}},2869:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var r=n(7437),s=n(2265),a=n(7495),i=n(535),c=n(4508);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:n,variant:s,size:i,asChild:l=!1,...d}=e,u=l?a.g7:"button";return(0,r.jsx)(u,{className:(0,c.cn)(o({variant:s,size:i,className:n})),ref:t,...d})});l.displayName="Button"},7604:function(e,t,n){"use strict";n.d(t,{FontAwesomeIcon:function(){return s}});var r=n(7437);function s(e){let{icon:t,className:n="",size:s,style:a,"aria-hidden":i=!0}=e,c="".concat(t," ").concat(n).trim();return(0,r.jsx)("span",{style:{display:"contents",...a},"aria-hidden":i,children:(0,r.jsx)("i",{className:c,suppressHydrationWarning:!0})})}},4508:function(e,t,n){"use strict";n.d(t,{cn:function(){return a}});var r=n(1994),s=n(3335);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}},8575:function(e,t,n){"use strict";n.d(t,{F:function(){return a},e:function(){return i}});var r=n(2265);function s(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(...e){return t=>{let n=!1,r=e.map(e=>{let r=s(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){let n=r[t];"function"==typeof n?n():s(e[t],null)}}}}function i(...e){return r.useCallback(a(...e),e)}},7495:function(e,t,n){"use strict";n.d(t,{Z8:function(){return i},g7:function(){return c}});var r=n(2265),s=n(8575),a=n(7437);function i(e){let t=function(e){let t=r.forwardRef((e,t)=>{let{children:n,...a}=e;if(r.isValidElement(n)){let e,i;let c=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.props.ref:n.props.ref||n.ref,o=function(e,t){let n={...t};for(let r in t){let s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...e)=>{let t=a(...e);return s(...e),t}:s&&(n[r]=s):"style"===r?n[r]={...s,...a}:"className"===r&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}(a,n.props);return n.type!==r.Fragment&&(o.ref=t?(0,s.F)(t,c):c),r.cloneElement(n,o)}return r.Children.count(n)>1?r.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),n=r.forwardRef((e,n)=>{let{children:s,...i}=e,c=r.Children.toArray(s),o=c.find(l);if(o){let e=o.props.children,s=c.map(t=>t!==o?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...i,ref:n,children:r.isValidElement(e)?r.cloneElement(e,void 0,s):null})}return(0,a.jsx)(t,{...i,ref:n,children:s})});return n.displayName=`${e}.Slot`,n}var c=i("Slot"),o=Symbol("radix.slottable");function l(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o}},535:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});var r=n(1994);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=r.W,i=(e,t)=>n=>{var r;if((null==t?void 0:t.variants)==null)return a(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:i,defaultVariants:c}=t,o=Object.keys(i).map(e=>{let t=null==n?void 0:n[e],r=null==c?void 0:c[e];if(null===t)return null;let a=s(t)||s(r);return i[e][a]}),l=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{});return a(e,o,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...c,...l}[t]):({...c,...l})[t]===n})?[...e,n,r]:e},[]),null==n?void 0:n.class,null==n?void 0:n.className)}}},function(e){e.O(0,[6137,7648,2971,2117,1744],function(){return e(e.s=9358)}),_N_E=e.O()}]);