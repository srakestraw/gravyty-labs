(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5152],{6850:function(e,t,n){Promise.resolve().then(n.bind(n,5646))},2644:function(e,t,n){"use strict";n.d(t,{Gr:function(){return a},M8:function(){return o},O8:function(){return u},Wv:function(){return c},b0:function(){return s},gS:function(){return i},l6:function(){return l},tu:function(){return d}});let r="/api/banner";async function s(){let e=await fetch("".concat(r,"/academic-periods"));if(!e.ok)throw Error("Failed to fetch academic periods");return e.json()}async function a(e){let t=new URLSearchParams;(null==e?void 0:e.termCode)&&t.append("termCode",e.termCode),(null==e?void 0:e.academicPeriodId)&&t.append("academicPeriod",e.academicPeriodId),(null==e?void 0:e.courseId)&&t.append("course",e.courseId),(null==e?void 0:e.subject)&&t.append("subject",e.subject),(null==e?void 0:e.status)&&t.append("status",e.status);let n=await fetch("".concat(r,"/sections?").concat(t.toString()));if(!n.ok)throw Error("Failed to fetch sections");return n.json()}async function i(e){let t=new URLSearchParams;(null==e?void 0:e.subjectCode)&&t.append("subject",e.subjectCode),(null==e?void 0:e.status)&&t.append("status",e.status);let n=await fetch("".concat(r,"/courses?").concat(t.toString()));if(!n.ok)throw Error("Failed to fetch courses");return n.json()}async function c(e){let t=await fetch("".concat(r,"/students?id=").concat(e));if(!t.ok)throw Error("Failed to fetch student");return(await t.json())[0]||null}async function l(e){let t=await fetch("".concat(r,"/students?search=").concat(encodeURIComponent(e)));if(!t.ok)throw Error("Failed to search students");return t.json()}async function o(e){let t=await fetch("".concat(r,"/persons?id=").concat(e));if(!t.ok)throw Error("Failed to fetch person");return(await t.json())[0]||null}async function d(e){let t=new URLSearchParams;(null==e?void 0:e.studentId)&&t.append("student",e.studentId),(null==e?void 0:e.sectionId)&&t.append("section",e.sectionId),(null==e?void 0:e.termCode)&&t.append("termCode",e.termCode),(null==e?void 0:e.academicPeriodId)&&t.append("academicPeriod",e.academicPeriodId);let n=await fetch("".concat(r,"/section-registrations?").concat(t.toString()));if(!n.ok)throw Error("Failed to fetch section registrations");return n.json()}async function u(){let e=await i({status:"active"}),t=new Set;return e.forEach(e=>{var n;(null===(n=e.subject)||void 0===n?void 0:n.code)&&t.add(e.subject.code)}),Array.from(t).sort()}},5646:function(e,t,n){"use strict";n.d(t,{SectionDetailClient:function(){return d}});var r=n(7437),s=n(2265),a=n(7648),i=n(2644),c=n(7604),l=n(2869),o=n(4508);function d(e){let{sectionId:t}=e,[n,d]=(0,s.useState)(null),[u,m]=(0,s.useState)([]),[x,f]=(0,s.useState)(!0),[h,p]=(0,s.useState)(null);function g(e){if(!e)return"";let[t,n]=e.split(":"),r=parseInt(t,10);return"".concat(r%12||12,":").concat(n," ").concat(r>=12?"PM":"AM")}if((0,s.useEffect)(()=>{async function e(){try{f(!0),p(null);let e=(await (0,i.Gr)({})).find(e=>e.id===t);if(!e){p("Section not found");return}d(e);let n=await (0,i.tu)({sectionId:t}),r=await Promise.all(n.map(async e=>{try{let t=await (0,i.M8)(e.student.person.id);return{...e,personData:t}}catch(t){return console.error("Failed to fetch person for student ".concat(e.student.id,":"),t),{...e,personData:void 0}}}));m(r)}catch(e){p(e instanceof Error?e.message:"Failed to load section data")}finally{f(!1)}}t&&e()},[t]),x)return(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,r.jsx)(c.FontAwesomeIcon,{icon:"fa-solid fa-spinner",className:"animate-spin h-5 w-5"}),(0,r.jsx)("span",{children:"Loading section data..."})]})});if(h)return(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(c.FontAwesomeIcon,{icon:"fa-solid fa-exclamation-circle",className:"h-12 w-12 mx-auto mb-4 text-red-500"}),(0,r.jsx)("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:h}),(0,r.jsx)(a.default,{href:"/sis",children:(0,r.jsx)(l.z,{variant:"outline",children:"Back to SIS"})})]});if(!n)return null;let y="".concat(n.course.subject.code," ").concat(n.course.number),j=n.capacity>0?n.enrolled/n.capacity*100:0;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between border-b border-gray-200 pb-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(a.default,{href:"/sis",children:(0,r.jsx)(l.z,{variant:"ghost",size:"icon",children:(0,r.jsx)(c.FontAwesomeIcon,{icon:"fa-solid fa-arrow-left"})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:[y,": ",n.title||n.course.title]}),(0,r.jsxs)("p",{className:"text-gray-600 mt-1",children:["CRN: ",n.crn," â€¢ ",n.academicPeriod.title]})]})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,r.jsx)(c.FontAwesomeIcon,{icon:"fa-solid fa-info-circle",className:"h-5 w-5 text-[#336AEA]"}),"Section Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Course"}),(0,r.jsxs)("p",{className:"text-gray-900",children:[y," - ",n.course.title]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Section Number"}),(0,r.jsx)("p",{className:"text-gray-900",children:n.number})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Term"}),(0,r.jsxs)("p",{className:"text-gray-900",children:[n.academicPeriod.title," (",n.academicPeriod.code,")"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Credits"}),(0,r.jsx)("p",{className:"text-gray-900",children:n.credits.minimum===n.credits.maximum?n.credits.minimum:"".concat(n.credits.minimum,"-").concat(n.credits.maximum)})]}),n.schedule&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Schedule"}),(0,r.jsxs)("p",{className:"text-gray-900",children:[function(e){let t={monday:"M",tuesday:"T",wednesday:"W",thursday:"Th",friday:"F",saturday:"Sa",sunday:"Su"};return e.map(e=>t[e.toLowerCase()]||e).join("")}(n.schedule.daysOfWeek),n.schedule.startTime&&n.schedule.endTime&&(0,r.jsxs)("span",{className:"ml-2",children:[g(n.schedule.startTime)," - ",g(n.schedule.endTime)]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Room"}),(0,r.jsx)("p",{className:"text-gray-900",children:n.schedule.room?"".concat(n.schedule.room.building," ").concat(n.schedule.room.number):"TBA"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Enrollment"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("p",{className:"text-gray-900",children:[n.enrolled," / ",n.capacity," (",n.available," available)"]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:(0,o.cn)("h-2 rounded-full transition-all",j>=100?"bg-red-500":j>=80?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(j,100),"%")}})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,r.jsx)("p",{children:(0,r.jsx)("span",{className:(0,o.cn)("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium","open"===n.status?"bg-green-100 text-green-800":"closed"===n.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:n.status})})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[(0,r.jsx)(c.FontAwesomeIcon,{icon:"fa-solid fa-users",className:"h-5 w-5 text-[#336AEA]"}),"Roster (",u.length," students)"]})}),0===u.length?(0,r.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,r.jsx)(c.FontAwesomeIcon,{icon:"fa-solid fa-inbox",className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,r.jsx)("p",{children:"No students enrolled in this section"})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border-collapse",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 bg-gray-50",children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Student Number"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Email"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Registered"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Credits"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>{var t;let n=function(e){if(!e||!e.names||0===e.names.length)return"Unknown";let t=e.names.find(e=>e.preferred)||e.names[0],n=[t.given];return t.middle&&n.push(t.middle),n.push(t.family),n.join(" ")}(e.personData),s=(t=e.personData)&&t.emails&&0!==t.emails.length?(t.emails.find(e=>e.preferred)||t.emails[0]).address:"";return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,r.jsx)(a.default,{href:"/sis/students/".concat(e.student.id),className:"text-[#336AEA] hover:underline font-medium",children:n})}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm font-mono text-gray-900",children:e.student.studentNumber}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:s||"N/A"}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,r.jsx)("span",{className:(0,o.cn)("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium","REG"===e.statusCode?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.statusCode})}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(e.registeredOn).toLocaleDateString()}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.credits})]},e.id)})})]})})]})]})}},2869:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var r=n(7437),s=n(2265),a=n(7495),i=n(535),c=n(4508);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:n,variant:s,size:i,asChild:o=!1,...d}=e,u=o?a.g7:"button";return(0,r.jsx)(u,{className:(0,c.cn)(l({variant:s,size:i,className:n})),ref:t,...d})});o.displayName="Button"},7604:function(e,t,n){"use strict";n.d(t,{FontAwesomeIcon:function(){return s}});var r=n(7437);function s(e){let{icon:t,className:n="",size:s,style:a,"aria-hidden":i=!0}=e,c="".concat(t," ").concat(n).trim();return(0,r.jsx)("span",{style:{display:"contents",...a},"aria-hidden":i,children:(0,r.jsx)("i",{className:c,suppressHydrationWarning:!0})})}},4508:function(e,t,n){"use strict";n.d(t,{cn:function(){return a}});var r=n(1994),s=n(3335);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}},8575:function(e,t,n){"use strict";n.d(t,{F:function(){return a},e:function(){return i}});var r=n(2265);function s(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(...e){return t=>{let n=!1,r=e.map(e=>{let r=s(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){let n=r[t];"function"==typeof n?n():s(e[t],null)}}}}function i(...e){return r.useCallback(a(...e),e)}},7495:function(e,t,n){"use strict";n.d(t,{Z8:function(){return i},g7:function(){return c}});var r=n(2265),s=n(8575),a=n(7437);function i(e){let t=function(e){let t=r.forwardRef((e,t)=>{let{children:n,...a}=e;if(r.isValidElement(n)){let e,i;let c=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.props.ref:n.props.ref||n.ref,l=function(e,t){let n={...t};for(let r in t){let s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...e)=>{let t=a(...e);return s(...e),t}:s&&(n[r]=s):"style"===r?n[r]={...s,...a}:"className"===r&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}(a,n.props);return n.type!==r.Fragment&&(l.ref=t?(0,s.F)(t,c):c),r.cloneElement(n,l)}return r.Children.count(n)>1?r.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),n=r.forwardRef((e,n)=>{let{children:s,...i}=e,c=r.Children.toArray(s),l=c.find(o);if(l){let e=l.props.children,s=c.map(t=>t!==l?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...i,ref:n,children:r.isValidElement(e)?r.cloneElement(e,void 0,s):null})}return(0,a.jsx)(t,{...i,ref:n,children:s})});return n.displayName=`${e}.Slot`,n}var c=i("Slot"),l=Symbol("radix.slottable");function o(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}},535:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});var r=n(1994);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=r.W,i=(e,t)=>n=>{var r;if((null==t?void 0:t.variants)==null)return a(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:i,defaultVariants:c}=t,l=Object.keys(i).map(e=>{let t=null==n?void 0:n[e],r=null==c?void 0:c[e];if(null===t)return null;let a=s(t)||s(r);return i[e][a]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{});return a(e,l,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...c,...o}[t]):({...c,...o})[t]===n})?[...e,n,r]:e},[]),null==n?void 0:n.class,null==n?void 0:n.className)}}},function(e){e.O(0,[6137,7648,2971,2117,1744],function(){return e(e.s=6850)}),_N_E=e.O()}]);