"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8960],{8960:function(e,s,t){t.d(s,{h:function(){return N}});var a=t(7437),r=t(2265),l=t(9376),i=t(3360),n=t(2869),c=t(5186),o=t(4508);function d(e){let{profile:s,onUpdate:t}=e;function r(e,s){t(t=>({...t,brand:{...t.brand,[e]:s}}))}return(0,a.jsxs)("section",{className:"rounded-xl border border-gray-100 bg-white p-6 shadow-sm space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Brand Settings"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Configure visual brand elements that can be used in templates and previews."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-gray-700",children:"Logo URL"}),(0,a.jsx)(c.I,{type:"url",value:s.brand.logoUrl||"",onChange:e=>r("logoUrl",e.target.value||void 0),placeholder:"https://example.com/logo.png",className:"text-sm"}),(0,a.jsx)("p",{className:"text-[10px] text-gray-500",children:"URL to your brand logo image"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-gray-700",children:"Primary Color"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"color",value:s.brand.primaryColor||"#3B82F6",onChange:e=>r("primaryColor",e.target.value),className:"h-10 w-20 rounded border border-gray-200 cursor-pointer"}),(0,a.jsx)(c.I,{type:"text",value:s.brand.primaryColor||"",onChange:e=>r("primaryColor",e.target.value||void 0),placeholder:"#3B82F6",className:"flex-1 text-sm"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-gray-700",children:"Secondary Color"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"color",value:s.brand.secondaryColor||"#8B5CF6",onChange:e=>r("secondaryColor",e.target.value),className:"h-10 w-20 rounded border border-gray-200 cursor-pointer"}),(0,a.jsx)(c.I,{type:"text",value:s.brand.secondaryColor||"",onChange:e=>r("secondaryColor",e.target.value||void 0),placeholder:"#8B5CF6",className:"flex-1 text-sm"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-gray-700",children:"Accent Color"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"color",value:s.brand.accentColor||"#10B981",onChange:e=>r("accentColor",e.target.value),className:"h-10 w-20 rounded border border-gray-200 cursor-pointer"}),(0,a.jsx)(c.I,{type:"text",value:s.brand.accentColor||"",onChange:e=>r("accentColor",e.target.value||void 0),placeholder:"#10B981",className:"flex-1 text-sm"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-gray-700",children:"Typography Style"}),(0,a.jsxs)("select",{value:s.brand.typographyStyle||"system",onChange:e=>r("typographyStyle",e.target.value),className:"w-full rounded border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900",children:[(0,a.jsx)("option",{value:"system",children:"System"}),(0,a.jsx)("option",{value:"serif",children:"Serif"}),(0,a.jsx)("option",{value:"sans",children:"Sans"}),(0,a.jsx)("option",{value:"custom",children:"Custom"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2 pt-4 border-t border-gray-100",children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-gray-700",children:"Signature / Footer Template"}),(0,a.jsx)("textarea",{value:s.brand.signatureTemplate||"",onChange:e=>r("signatureTemplate",e.target.value||void 0),placeholder:"Optional signature or closing used in emails or long-form messages.",rows:4,className:"w-full rounded border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"}),(0,a.jsx)("p",{className:"text-[10px] text-gray-500",children:"Optional signature or closing used in emails or long-form messages."})]})]})}var x=t(7604);let p={formality:{low:"Casual",high:"Formal"},warmth:{low:"Neutral",high:"Warm"},directness:{low:"Indirect",high:"Direct"},energy:{low:"Calm",high:"Energetic"},detailLevel:{low:"Concise",high:"Detailed"},riskPosture:{low:"Conservative",high:"Bold"}};function m(e){let{profile:s,onUpdate:t}=e,[l,i]=r.useState(""),[n,o]=r.useState("");function d(e){!e.trim()||s.missionValues.includes(e.trim())||(t(s=>({...s,missionValues:[...s.missionValues,e.trim()]})),i(""))}function m(e){!e.trim()||s.communicationPillars.includes(e.trim())||(t(s=>({...s,communicationPillars:[...s.communicationPillars,e.trim()]})),o(""))}function h(e,s){t(t=>({...t,stylePreferences:{...t.stylePreferences,[e]:s}}))}return(0,a.jsxs)("section",{className:"rounded-xl border border-gray-100 bg-white p-6 shadow-sm space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Voice Settings"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"These settings define how this profile sounds. Assignment Rules decide where it is used."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-[11px] font-medium uppercase tracking-wide text-gray-500",children:"Mission Values"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:s.missionValues.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-50 px-2 py-0.5 text-[11px] text-gray-700 border border-gray-200",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>{t(s=>({...s,missionValues:s.missionValues.filter(s=>s!==e)}))},className:"ml-1 text-gray-400 hover:text-red-600",children:(0,a.jsx)(x.FontAwesomeIcon,{icon:"fa-solid fa-xmark",className:"h-3 w-3"})})]},e))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.I,{type:"text",placeholder:"Add mission value...",value:l,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),d(l))},className:"h-7 text-[11px]"}),(0,a.jsx)("button",{type:"button",onClick:()=>d(l),className:"rounded border border-gray-300 bg-white px-2 py-1 text-[11px] text-gray-700 hover:bg-gray-50",children:"Add"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-[11px] font-medium uppercase tracking-wide text-gray-500",children:"Communication Pillars"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:s.communicationPillars.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-50 px-2 py-0.5 text-[11px] text-gray-700 border border-gray-200",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>{t(s=>({...s,communicationPillars:s.communicationPillars.filter(s=>s!==e)}))},className:"ml-1 text-gray-400 hover:text-red-600",children:(0,a.jsx)(x.FontAwesomeIcon,{icon:"fa-solid fa-xmark",className:"h-3 w-3"})})]},e))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.I,{type:"text",placeholder:"Add communication pillar...",value:n,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),m(n))},className:"h-7 text-[11px]"}),(0,a.jsx)("button",{type:"button",onClick:()=>m(n),className:"rounded border border-gray-300 bg-white px-2 py-1 text-[11px] text-gray-700 hover:bg-gray-50",children:"Add"})]})]}),(0,a.jsxs)("div",{className:"space-y-4 border-t border-gray-100 pt-4",children:[(0,a.jsx)("p",{className:"text-[11px] font-medium uppercase tracking-wide text-gray-500",children:"Voice Characteristics"}),Object.entries(s.characteristics).map(e=>{let[s,r]=e,l=p[s];return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-[11px] font-medium text-gray-700 capitalize",children:s.replace(/([A-Z])/g," $1").trim()}),(0,a.jsx)("span",{className:"text-[11px] text-gray-600",children:r})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-[10px] text-gray-500 w-16 text-right",children:l.low}),(0,a.jsx)("input",{type:"range",min:"0",max:"100",value:r,onChange:e=>{var a;return a=parseInt(e.target.value),void t(e=>({...e,characteristics:{...e.characteristics,[s]:a}}))},className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,a.jsx)("span",{className:"text-[10px] text-gray-500 w-16",children:l.high})]})]},s)})]}),(0,a.jsxs)("div",{className:"space-y-3 border-t border-gray-100 pt-4",children:[(0,a.jsx)("p",{className:"text-[11px] font-medium uppercase tracking-wide text-gray-500",children:"Style Preferences"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:s.stylePreferences.allowEmojis,onChange:e=>h("allowEmojis",e.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,a.jsx)("span",{className:"text-[11px] text-gray-700",children:"Allow emojis in messages"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:s.stylePreferences.allowContractions,onChange:e=>h("allowContractions",e.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,a.jsx)("span",{className:"text-[11px] text-gray-700",children:'Allow contractions (e.g., "don\'t", "can\'t")'})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:s.stylePreferences.useFirstPerson,onChange:e=>h("useFirstPerson",e.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,a.jsx)("span",{className:"text-[11px] text-gray-700",children:'Use first person ("I", "we")'})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:s.stylePreferences.allowLightHumor,onChange:e=>h("allowLightHumor",e.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,a.jsx)("span",{className:"text-[11px] text-gray-700",children:"Allow light humor"})]})]})]})]})}let h=[{id:"app-1",name:"Admissions AI Assistant"},{id:"app-2",name:"Student Success Coach"},{id:"app-3",name:"Athletics Bot"}],u=[{id:"agent-1",name:"Donor AI Agent"},{id:"agent-2",name:"Alumni Engagement Agent"},{id:"agent-3",name:"Student Support Agent"}],g=[{id:"group-1",name:"Admissions counselors"},{id:"group-2",name:"Advancement team"},{id:"group-3",name:"Athletics staff"}],y=[{id:"user-1",name:"Jordan Lee"},{id:"user-2",name:"Alex Martin"},{id:"user-3",name:"Taylor Singh"}];function f(e){let{profile:s,rules:t,allRules:l,allProfiles:i,onUpdateRules:c}=e,[d,p]=r.useState("All"),[m,f]=r.useState(!1),[b,j]=r.useState({scope:"app",channelScope:"all",profileId:s.id}),[N,v]=r.useState(null),w=r.useRef(null),C=r.useMemo(()=>"All"===d?t:t.filter(e=>e.scope===d),[t,d]),k=r.useMemo(()=>[...C].sort((e,s)=>e.order-s.order),[C]),A=r.useMemo(()=>(function(e){let s={user:[],group:[],agent:[],app:[]};return e.forEach(e=>{s[e.scope]&&s[e.scope].push(e)}),Object.keys(s).forEach(e=>{s[e].sort((e,s)=>e.order-s.order)}),s})(t),[t]),S=t.length>0,I=s.isDefault;function P(e){switch(e){case"app":return h;case"agent":return u;case"group":return g;case"user":return y}}function D(e,s){c(t.map(t=>t.id===e?{...t,...s}:t))}function F(e,s){let a=t.findIndex(s=>s.id===e);if(-1===a)return;let r=[...t],l="up"===s?a-1:a+1;if(l<0||l>=r.length)return;let i=r[a].order;r[a].order=r[l].order,r[l].order=i;let n=[...r].sort((e,s)=>e.order-s.order);n.forEach((e,s)=>{e.order=s}),c(n)}return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("section",{className:"rounded-xl border border-gray-100 bg-white p-6 shadow-sm space-y-4",ref:w,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"Assignment Rules"}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Define how this profile is assigned to specific apps, agents, groups, and users."}),(0,a.jsxs)("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-[11px] font-medium text-blue-900 mb-1",children:"Assignment priority:"}),(0,a.jsxs)("ol",{className:"text-[10px] text-blue-800 list-decimal list-inside space-y-0.5",children:[(0,a.jsx)("li",{children:"User"}),(0,a.jsx)("li",{children:"Group"}),(0,a.jsx)("li",{children:"Agent"}),(0,a.jsx)("li",{children:"App"}),(0,a.jsx)("li",{children:"Default profile"})]}),(0,a.jsx)("p",{className:"text-[10px] text-blue-700 mt-2",children:"When multiple rules match, the most specific rule wins. If rules have equal specificity, the rule with the highest priority (top-most) is applied."})]})]}),(0,a.jsxs)(n.z,{size:"sm",onClick:()=>f(!0),className:"text-[11px] h-7",children:[(0,a.jsx)(x.FontAwesomeIcon,{icon:"fa-solid fa-plus",className:"h-3 w-3 mr-1"}),"Add rule"]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:["All","user","group","agent","app"].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>p(e),className:(0,o.cn)("px-3 py-1 rounded-full text-[11px] font-medium transition-colors",d===e?"bg-gray-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"All"===e?"All":e.charAt(0).toUpperCase()+e.slice(1)+"s"},e))}),0===k.length?(0,a.jsxs)("div",{className:"text-center py-12 border border-gray-200 rounded-lg bg-gray-50",children:[(0,a.jsx)(x.FontAwesomeIcon,{icon:"fa-solid fa-list",className:"h-8 w-8 text-gray-400 mb-3"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"No assignment rules yet"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"This profile is not assigned to any apps, agents, groups, or users. Create a rule to assign it."}),(0,a.jsxs)(n.z,{size:"sm",onClick:()=>f(!0),className:"text-[11px]",children:[(0,a.jsx)(x.FontAwesomeIcon,{icon:"fa-solid fa-plus",className:"h-3 w-3 mr-1"}),"Add your first rule"]})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Scope"}),(0,a.jsx)("th",{className:"px-4 py-2 text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Target"}),(0,a.jsx)("th",{className:"px-4 py-2 text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Channel"}),(0,a.jsx)("th",{className:"px-4 py-2 text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),(0,a.jsx)("th",{className:"px-4 py-2 text-[11px] font-medium text-gray-500 uppercase tracking-wider text-right",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map((e,s)=>{P(e.scope).find(s=>s.id===e.targetId);let r=N===e.id;return(0,a.jsxs)("tr",{"data-rule-id":e.id,className:(0,o.cn)("hover:bg-gray-50 transition-colors",r&&"bg-slate-100 ring-2 ring-indigo-500"),children:[(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsxs)("select",{value:e.scope,onChange:s=>{var t,a;let r=s.target.value,l=P(r);D(e.id,{scope:r,targetId:(null===(t=l[0])||void 0===t?void 0:t.id)||"",targetLabel:(null===(a=l[0])||void 0===a?void 0:a.name)||""})},className:"text-[11px] rounded border border-gray-200 bg-white px-2 py-1 text-gray-900",children:[(0,a.jsx)("option",{value:"user",children:"User"}),(0,a.jsx)("option",{value:"group",children:"Group"}),(0,a.jsx)("option",{value:"agent",children:"Agent"}),(0,a.jsx)("option",{value:"app",children:"App"})]})}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsx)("select",{value:e.targetId,onChange:s=>{let t=P(e.scope).find(e=>e.id===s.target.value);D(e.id,{targetId:s.target.value,targetLabel:(null==t?void 0:t.name)||""})},className:"text-[11px] rounded border border-gray-200 bg-white px-2 py-1 text-gray-900 min-w-[180px]",children:P(e.scope).map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsxs)("select",{value:e.channelScope,onChange:s=>D(e.id,{channelScope:s.target.value}),className:"text-[11px] rounded border border-gray-200 bg-white px-2 py-1 text-gray-900",children:[(0,a.jsx)("option",{value:"all",children:"All channels"}),(0,a.jsx)("option",{value:"chat",children:"Chat only"}),(0,a.jsx)("option",{value:"email",children:"Email only"}),(0,a.jsx)("option",{value:"sms",children:"SMS only"})]})}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{type:"button",onClick:()=>F(e.id,"up"),disabled:0===s,className:"text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:(0,a.jsx)(x.FontAwesomeIcon,{icon:"fa-solid fa-arrow-up",className:"h-3 w-3"})}),(0,a.jsx)("span",{className:"text-[11px] text-gray-600 min-w-[2rem] text-center",children:e.order}),(0,a.jsx)("button",{type:"button",onClick:()=>F(e.id,"down"),disabled:s===k.length-1,className:"text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:(0,a.jsx)(x.FontAwesomeIcon,{icon:"fa-solid fa-arrow-down",className:"h-3 w-3"})})]})}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-right",children:(0,a.jsx)("button",{type:"button",onClick:()=>{var s;return s=e.id,void(confirm("Are you sure you want to delete this assignment rule?")&&c(t.filter(e=>e.id!==s)))},className:"text-gray-400 hover:text-red-600",title:"Delete rule",children:(0,a.jsx)(x.FontAwesomeIcon,{icon:"fa-solid fa-trash",className:"h-4 w-4"})})})]},e.id)})})]})})]}),(0,a.jsxs)("section",{className:"rounded-xl border border-gray-100 bg-white p-6 shadow-sm space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Where this profile applies"}),(0,a.jsx)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg mt-2",children:(0,a.jsxs)("p",{className:"text-[11px] text-blue-800",children:["This section summarizes the entities where this profile is in effect, based on the assignment rules above and default fallback.",I&&(0,a.jsxs)("span",{className:"block mt-1",children:[(0,a.jsx)("strong",{children:"Note:"})," Because this profile is marked as the default, it will also apply wherever no specific rule matches."]})]})})]}),S?(0,a.jsx)("div",{className:"space-y-6",children:Object.entries(A).map(e=>{let[s,t]=e;return 0===t.length?null:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-[11px] font-semibold text-gray-700 uppercase tracking-wide",children:function(e){switch(e){case"user":return"Users";case"group":return"Groups";case"agent":return"Agents";case"app":return"Apps"}}(s)}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{className:"px-4 py-2 text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Channel"}),(0,a.jsx)("th",{className:"px-4 py-2 text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),(0,a.jsx)("th",{className:"px-4 py-2 text-[11px] font-medium text-gray-500 uppercase tracking-wider text-right",children:"Rule"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsx)("span",{className:"text-[11px] text-gray-900",children:e.targetLabel})}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsx)("span",{className:"text-[11px] text-gray-600",children:function(e){switch(e){case"all":return"All channels";case"chat":return"Chat";case"email":return"Email";case"sms":return"SMS";default:return e}}(e.channelScope)})}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsx)("span",{className:"text-[11px] text-gray-600",children:e.order})}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-right",children:(0,a.jsx)("button",{type:"button",onClick:()=>{var s;return s=e.id,void(w.current&&w.current.scrollIntoView({behavior:"smooth",block:"start"}),v(s),setTimeout(()=>{v(null)},2e3))},className:"text-[11px] text-indigo-600 hover:text-indigo-700 font-medium",children:"View rule â†’"})})]},e.id))})]})})]},s)})}):(0,a.jsxs)("div",{className:"text-center py-12 border border-gray-200 rounded-lg bg-gray-50",children:[(0,a.jsx)(x.FontAwesomeIcon,{icon:"fa-solid fa-info-circle",className:"h-8 w-8 text-gray-400 mb-3"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:I?"Default Profile":"No Assignment Rules"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:I?(0,a.jsx)(a.Fragment,{children:"This profile is the default profile. It applies to all apps, agents, groups, and users where no specific assignment rule matches."}):(0,a.jsx)(a.Fragment,{children:"This profile has no assignment rules. It will only be used if explicitly selected or if it becomes the default profile."})}),!I&&(0,a.jsx)("p",{className:"text-[10px] text-gray-400 mt-2",children:"Create assignment rules above to apply this profile to specific entities."})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,a.jsx)("h3",{className:"text-[11px] font-semibold text-gray-700 mb-2",children:"How Assignment Priority Works"}),(0,a.jsxs)("div",{className:"space-y-2 text-[10px] text-gray-600",children:[(0,a.jsx)("p",{children:"Assignment rules are evaluated in order of specificity (most specific to least specific):"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"User"})," - Rules that target a specific user"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Group"})," - Rules that target a group the user belongs to"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Agent"})," - Rules that target a specific AI agent"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"App"})," - Rules that target an application"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Default"})," - The profile marked as default (if no rules match)"]})]}),(0,a.jsx)("p",{className:"mt-2",children:"When multiple rules match at the same specificity level, the rule with the highest priority (lowest order number, shown at the top) is applied."})]})]})]}),m&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Add Assignment Rule"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-[11px] font-medium text-gray-700 mb-1",children:["Scope ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:b.scope||"app",onChange:e=>{var s;return s=e.target.value,void j({...b,scope:s,targetId:void 0})},className:"w-full rounded border border-gray-200 bg-white px-2 py-1.5 text-[11px] text-gray-900",children:[(0,a.jsx)("option",{value:"user",children:"User"}),(0,a.jsx)("option",{value:"group",children:"Group"}),(0,a.jsx)("option",{value:"agent",children:"Agent"}),(0,a.jsx)("option",{value:"app",children:"App"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-[11px] font-medium text-gray-700 mb-1",children:["Target ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:b.targetId||"",onChange:e=>{let s=P(b.scope||"app").find(s=>s.id===e.target.value);j({...b,targetId:e.target.value,targetLabel:(null==s?void 0:s.name)||""})},className:"w-full rounded border border-gray-200 bg-white px-2 py-1.5 text-[11px] text-gray-900",children:[(0,a.jsxs)("option",{value:"",children:["Select ",b.scope,"..."]}),P(b.scope||"app").map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-gray-700 mb-1",children:"Channel"}),(0,a.jsxs)("select",{value:b.channelScope||"all",onChange:e=>j({...b,channelScope:e.target.value}),className:"w-full rounded border border-gray-200 bg-white px-2 py-1.5 text-[11px] text-gray-900",children:[(0,a.jsx)("option",{value:"all",children:"All channels"}),(0,a.jsx)("option",{value:"chat",children:"Chat only"}),(0,a.jsx)("option",{value:"email",children:"Email only"}),(0,a.jsx)("option",{value:"sms",children:"SMS only"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>{f(!1),j({scope:"app",channelScope:"all",profileId:s.id})},className:"text-[11px]",children:"Cancel"}),(0,a.jsx)(n.z,{size:"sm",onClick:function(){if(!b.scope||!b.targetId)return;let e=P(b.scope).find(e=>e.id===b.targetId),a=t.length>0?Math.max(...t.map(e=>e.order)):-1;c([...t,{id:"assignment_rule_".concat(Date.now()),scope:b.scope,targetId:b.targetId,targetLabel:(null==e?void 0:e.name)||"",profileId:s.id,channelScope:b.channelScope||"all",order:a+1}]),f(!1),j({scope:"app",channelScope:"all",profileId:s.id})},disabled:!b.scope||!b.targetId,className:"text-[11px]",children:"Add Rule"})]})]})})]})}function b(e){let{profile:s}=e,[t,l]=r.useState("chat"),[i,c]=r.useState(""),[d,p]=r.useState(null),[m,h]=r.useState(!1);async function u(){if(!i.trim()){alert("Please enter a sample prompt");return}h(!0),p(null);try{await new Promise(e=>setTimeout(e,1500));let e='Based on the "'.concat(s.name,'" profile:\n\nVoice Characteristics:\n- Formality: ').concat(s.characteristics.formality>66?"High":s.characteristics.formality>33?"Medium":"Low","\n- Warmth: ").concat(s.characteristics.warmth>66?"High":s.characteristics.warmth>33?"Medium":"Low","\n- Directness: ").concat(s.characteristics.directness>66?"High":s.characteristics.directness>33?"Medium":"Low","\n- Energy: ").concat(s.characteristics.energy>66?"High":s.characteristics.energy>33?"Medium":"Low","\n\nStyle Preferences:\n- Emojis: ").concat(s.stylePreferences.allowEmojis?"Allowed":"Not allowed","\n- Contractions: ").concat(s.stylePreferences.allowContractions?"Allowed":"Not allowed","\n- First Person: ").concat(s.stylePreferences.useFirstPerson?"Used":"Not used","\n- Light Humor: ").concat(s.stylePreferences.allowLightHumor?"Allowed":"Not allowed",'\n\nSample Response:\nBased on your message: "').concat(i,"\", here's how an assistant would respond following the ").concat(s.name," voice profile guidelines.");p(e)}catch(e){console.error("Error generating preview:",e),alert("Failed to generate preview. Please try again.")}finally{h(!1)}}return(0,a.jsxs)("section",{className:"rounded-xl border border-gray-100 bg-white p-6 shadow-sm space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Preview"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"See how this profile behaves in different channels."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-gray-700",children:"Channel"}),(0,a.jsx)("div",{className:"flex gap-2",children:["chat","email","sms"].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>l(e),className:(0,o.cn)("px-4 py-2 rounded border text-sm font-medium transition-colors",t===e?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),s.brand&&(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4 space-y-3",children:[(0,a.jsx)("p",{className:"text-[11px] font-medium text-gray-700",children:"Brand Preview"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[s.brand.logoUrl&&(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["Logo: ",(0,a.jsx)("span",{className:"text-blue-600",children:s.brand.logoUrl})]}),s.brand.primaryColor&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"Primary:"}),(0,a.jsx)("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:s.brand.primaryColor}}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:s.brand.primaryColor})]})]}),s.brand.typographyStyle&&(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["Typography: ",s.brand.typographyStyle]})]}),(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4 space-y-2",children:[(0,a.jsx)("p",{className:"text-[11px] font-medium text-gray-700",children:"Key Voice Characteristics"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600",children:[(0,a.jsxs)("div",{children:["Formality: ",s.characteristics.formality]}),(0,a.jsxs)("div",{children:["Warmth: ",s.characteristics.warmth]}),(0,a.jsxs)("div",{children:["Directness: ",s.characteristics.directness]}),(0,a.jsxs)("div",{children:["Energy: ",s.characteristics.energy]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-gray-700",children:"Sample Prompt"}),(0,a.jsx)("textarea",{value:i,onChange:e=>c(e.target.value),placeholder:"Enter a sample message that a student or constituent might send...",rows:4,className:"w-full rounded border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsx)(n.z,{onClick:u,disabled:m||!i.trim(),className:"w-full",children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.FontAwesomeIcon,{icon:"fa-solid fa-spinner",className:"h-4 w-4 mr-2 animate-spin"}),"Generating preview..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.FontAwesomeIcon,{icon:"fa-solid fa-wand-magic-sparkles",className:"h-4 w-4 mr-2"}),"Generate sample response"]})}),d&&(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Preview Response"}),(0,a.jsx)("button",{type:"button",onClick:()=>p(null),className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(x.FontAwesomeIcon,{icon:"fa-solid fa-xmark",className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"rounded bg-gray-50 p-3 text-sm text-gray-700 whitespace-pre-wrap",children:d}),(0,a.jsx)("p",{className:"text-[10px] text-gray-500",children:"This is a mock preview. In production, this would call your AI model with the configured settings."})]})]})}let j=[{id:"general",label:"General"},{id:"brand",label:"Brand"},{id:"voice",label:"Voice"},{id:"assignments",label:"Assignments"},{id:"preview",label:"Preview"}];function N(e){let{profile:s,allProfiles:t,assignmentRules:c,toneRules:x,onUpdateProfile:p,onUpdateProfiles:h,onUpdateAssignmentRules:u,onDeleteProfile:g,onSave:y,basePath:N="/admin/voice-and-tone"}=e,w=(0,l.useRouter)(),[C,k]=r.useState("general"),[A,S]=r.useState(s),[I,P]=r.useState(!1),[D,F]=r.useState(!1),E=r.useMemo(()=>x&&x.length>0&&0===c.length?x.map(i.l):c,[c,x]),z=r.useMemo(()=>E.filter(e=>e.profileId===s.id),[E,s.id]);function L(e){S(e),P(!0)}async function R(){F(!0);try{p(A),await y(),P(!1)}catch(e){console.error("Error saving profile:",e),alert("Failed to save profile. Please try again.")}finally{F(!1)}}async function T(){h(t.map(e=>({...e,isDefault:e.id===s.id}))),L(e=>({...e,isDefault:!0}));try{await y()}catch(e){console.error("Error saving default profile:",e)}}return r.useEffect(()=>{S(s),P(!1)},[s.id]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("nav",{className:"text-sm text-gray-600",children:[(0,a.jsx)("button",{type:"button",onClick:()=>w.push("".concat(N,"/profiles")),className:"hover:text-gray-900",children:"Voice & Tone"}),(0,a.jsx)("span",{className:"mx-2",children:"/"}),(0,a.jsx)("span",{className:"text-gray-900",children:A.name})]}),(0,a.jsx)("header",{className:"space-y-1",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:A.name}),A.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:A.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[A.isDefault?(0,a.jsx)("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2.5 py-1 text-xs font-medium text-blue-700",children:"Default"}):(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:T,className:"text-xs",children:"Set as default"}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:function(){let e={...A,id:"profile_".concat(Date.now()),name:"".concat(A.name," (Copy)"),isDefault:!1};h([...t,e]),w.push("".concat(N,"/profiles/").concat(e.id))},className:"text-xs",children:"Duplicate"}),(0,a.jsx)(n.z,{variant:"outline",size:"sm",onClick:function(){if(s.isDefault){alert("Cannot delete the default profile. Please set another profile as default first.");return}confirm('Are you sure you want to delete "'.concat(s.name,'"? This action cannot be undone.'))&&(g(s.id),w.push("".concat(N,"/profiles")))},className:"text-xs text-red-600 hover:text-red-700",children:"Delete"}),(0,a.jsx)(n.z,{onClick:R,disabled:!I||D,className:"text-xs",children:D?"Saving...":"Save changes"})]})]})}),(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8",children:j.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>k(e.id),className:(0,o.cn)("whitespace-nowrap border-b-2 py-2 px-1 text-sm font-medium transition-colors",C===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:e.label},e.id))})}),(0,a.jsxs)("div",{className:"mt-6",children:["general"===C&&(0,a.jsx)(v,{profile:A,onUpdate:L}),"brand"===C&&(0,a.jsx)(d,{profile:A,onUpdate:L}),"voice"===C&&(0,a.jsx)(m,{profile:A,onUpdate:L}),"assignments"===C&&(0,a.jsx)(f,{profile:A,rules:z,allRules:E,allProfiles:t,onUpdateRules:e=>{u([...E.filter(e=>e.profileId!==s.id),...e])}}),"preview"===C&&(0,a.jsx)(b,{profile:A})]})]})}function v(e){let{profile:s,onUpdate:t}=e,[l,i]=r.useState(s.name),[n,o]=r.useState(s.description||""),[d,x]=r.useState(s.isDefault);return r.useEffect(()=>{i(s.name),o(s.description||""),x(s.isDefault)},[s.id]),(0,a.jsxs)("section",{className:"rounded-xl border border-gray-100 bg-white p-6 shadow-sm space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900 mb-1",children:"General Settings"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Configure basic profile information and default status."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-[11px] font-medium text-gray-700 mb-1",children:["Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(c.I,{type:"text",value:l,onChange:e=>{var s;i(s=e.target.value),t(e=>({...e,name:s}))},placeholder:"e.g., Institutional, Admissions",className:"text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{value:n,onChange:e=>{var s;o(s=e.target.value),t(e=>({...e,description:s||void 0}))},placeholder:"Brief description of this profile",rows:3,className:"w-full rounded border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100",children:[(0,a.jsx)("input",{type:"checkbox",checked:d,onChange:e=>{var s;x(s=e.target.checked),t(e=>({...e,isDefault:s}))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,a.jsx)("label",{className:"text-sm text-gray-700 cursor-pointer",children:"Set as default profile"})]}),(0,a.jsxs)("div",{className:"pt-2 border-t border-gray-100",children:[(0,a.jsxs)("p",{className:"text-[10px] text-gray-500",children:["Profile ID: ",(0,a.jsx)("code",{className:"text-gray-600",children:s.id})]}),(0,a.jsx)("p",{className:"text-[10px] text-gray-500 mt-2",children:"Voice profiles define how your AI assistants communicate. Each profile can be mapped to specific apps, agents, groups, or users using Assignment Rules."})]})]})]})}}}]);