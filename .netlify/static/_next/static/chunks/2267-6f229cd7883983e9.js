"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2267],{2267:function(e,t,s){s.d(t,{W:function(){return d}});var a=s(7437),i=s(2265),l=s(9376),n=s(2869),r=s(7604),c=s(5186);function d(e){let{profiles:t,assignmentRules:s,onUpdateProfiles:d,onUpdateAssignmentRules:o,basePath:x="/admin/voice-and-tone"}=e,m=(0,l.useRouter)(),[p,u]=i.useState(!1),[h,f]=i.useState(""),[g,y]=i.useState(""),[j,N]=i.useState(null),[b,v]=i.useState(null),[w,C]=i.useState(!1);async function k(){if(!h.trim()||w)return;let e=j?t.find(e=>e.id===j):t.find(e=>e.isDefault)||t[0];if(e){C(!0);try{let s={...e,id:"profile_".concat(Date.now()),name:h.trim(),description:g.trim()||void 0,isDefault:!1};await d([...t,s]),u(!1),f(""),y(""),N(null),m.push("".concat(x,"/profiles/").concat(s.id))}catch(e){console.error("Error creating profile:",e),alert("Failed to create profile. Please try again.")}finally{C(!1)}}}async function D(e){let s={...e,id:"profile_".concat(Date.now()),name:"".concat(e.name," (Copy)"),isDefault:!1};await d([...t,s]),m.push("".concat(x,"/profiles/").concat(s.id))}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("header",{className:"space-y-1",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Brand, Voice & Tone Profiles"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Create and manage communication profiles that define brand, voice, and tone rules for your AI assistants."})]}),(0,a.jsxs)(n.z,{onClick:()=>{let e=t.find(e=>e.isDefault)||t[0];N((null==e?void 0:e.id)||null),u(!0)},className:"text-sm",children:[(0,a.jsx)(r.FontAwesomeIcon,{icon:"fa-solid fa-plus",className:"h-4 w-4 mr-2"}),"New profile"]})]})}),(0,a.jsx)("section",{className:"rounded-xl border border-gray-100 bg-white shadow-sm",children:0===t.length?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)(r.FontAwesomeIcon,{icon:"fa-solid fa-comments",className:"h-12 w-12 text-gray-400 mb-4"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"No profiles yet"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"Create your first profile to get started."}),(0,a.jsxs)(n.z,{onClick:()=>{u(!0)},size:"sm",children:[(0,a.jsx)(r.FontAwesomeIcon,{icon:"fa-solid fa-plus",className:"h-3 w-3 mr-1"}),"Create profile"]})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Profile"}),(0,a.jsx)("th",{className:"px-4 py-3 text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Default"}),(0,a.jsx)("th",{className:"px-4 py-3 text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Used by"}),(0,a.jsx)("th",{className:"px-4 py-3 text-[11px] font-medium text-gray-500 uppercase tracking-wider",children:"Last updated"}),(0,a.jsx)("th",{className:"px-4 py-3 text-[11px] font-medium text-gray-500 uppercase tracking-wider text-right",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),e.description&&(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:e.description})]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.isDefault?(0,a.jsx)("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2.5 py-1 text-[11px] font-medium text-blue-700",children:"Default"}):(0,a.jsx)("span",{className:"text-[11px] text-gray-400",children:"—"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-[11px] text-gray-600",children:function(e,t){let s=t.filter(t=>t.profileId===e);if(0===s.length)return"Not used";let a=s.filter(e=>"app"===e.scope).length,i=s.filter(e=>"agent"===e.scope).length,l=s.filter(e=>"group"===e.scope).length,n=s.filter(e=>"user"===e.scope).length,r=[];return a>0&&r.push("".concat(a," app").concat(a>1?"s":"")),i>0&&r.push("".concat(i," agent").concat(i>1?"s":"")),l>0&&r.push("".concat(l," group").concat(l>1?"s":"")),n>0&&r.push("".concat(n," user").concat(n>1?"s":"")),r.join(", ")||"Not used"}(e.id,s)}),(0,a.jsx)("td",{className:"px-4 py-3 text-[11px] text-gray-600",children:"—"}),(0,a.jsx)("td",{className:"px-4 py-3 text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>m.push("".concat(x,"/profiles/").concat(e.id)),className:"text-[11px] text-indigo-600 hover:text-indigo-700 font-medium",children:"Edit"}),(0,a.jsx)("button",{type:"button",onClick:()=>D(e),className:"text-[11px] text-gray-600 hover:text-gray-700",children:"Duplicate"}),!e.isDefault&&(0,a.jsx)("button",{type:"button",onClick:()=>{var s;return s=e.id,void d(t.map(e=>({...e,isDefault:e.id===s})))},className:"text-[11px] text-gray-600 hover:text-gray-700",children:"Set default"}),(0,a.jsx)("button",{type:"button",onClick:()=>(function(e){let a=t.find(t=>t.id===e);if(!a)return;if(a.isDefault){alert("Cannot delete the default profile. Please set another profile as default first.");return}if(!confirm('Are you sure you want to delete "'.concat(a.name,'"? This action cannot be undone.')))return;v(e);let i=t.filter(t=>t.id!==e),l=s.filter(t=>t.profileId!==e);d(i),o(l),v(null)})(e.id),disabled:b===e.id,className:"text-[11px] text-red-600 hover:text-red-700 disabled:opacity-50",children:b===e.id?"Deleting...":"Delete"})]})})]},e.id))})]})})})]}),p&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Create New Profile"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-[11px] font-medium text-gray-700 mb-1",children:["Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(c.I,{type:"text",value:h,onChange:e=>f(e.target.value),placeholder:"e.g., Admissions, Advancement",className:"h-8 text-[11px]",autoFocus:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-gray-700 mb-1",children:"Description (optional)"}),(0,a.jsx)(c.I,{type:"text",value:g,onChange:e=>y(e.target.value),placeholder:"Brief description of this profile",className:"h-8 text-[11px]"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-gray-700 mb-1",children:"Start from"}),(0,a.jsx)("select",{value:j||"",onChange:e=>N(e.target.value||null),className:"w-full rounded border border-gray-200 bg-white px-2 py-1.5 text-[11px] text-gray-900",children:t.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name,e.isDefault?" (Default)":""]},e.id))})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>{u(!1),f(""),y(""),N(null)},className:"text-[11px]",children:"Cancel"}),(0,a.jsx)(n.z,{size:"sm",onClick:k,disabled:!h.trim()||w,className:"text-[11px]",children:w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.FontAwesomeIcon,{icon:"fa-solid fa-spinner",className:"h-3 w-3 mr-1 animate-spin"}),"Creating..."]}):"Create Profile"})]})]})})]})}}}]);