"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[638],{5049:function(e,t,n){n.d(t,{n:function(){return d},O:function(){return f}});var r=n(7437),i=n(2265),s=n(3360);let o=null,a={voiceProfiles:[{id:"profile_institutional",name:"Institutional",description:"Default institutional voice profile",isDefault:!0,brand:{typographyStyle:"system"},missionValues:["student-centered","equity-first"],communicationPillars:["clarity","support","transparency"],characteristics:{formality:60,warmth:70,directness:65,energy:60,detailLevel:70,riskPosture:50},stylePreferences:{allowEmojis:!0,allowContractions:!0,useFirstPerson:!1,allowLightHumor:!1}}],brand:{missionValues:["student-centered","equity-first"],communicationPillars:["clarity","support","transparency"],sliders:{formality:60,warmth:70,directness:65,energy:60,detailLevel:70,riskPosture:50},style:{emojiAllowed:!0,contractionsAllowed:!0}},personality:{archetype:"guide",empathy:"high",enthusiasm:"balanced",humorAllowed:!1,figurativeLanguage:!0},assignmentRules:[],toneRules:[],updatedAt:new Date().toISOString()};async function l(){let e=function(e){if(e.assignmentRules&&e.assignmentRules.length>0)return e;if(e.toneRules&&e.toneRules.length>0){let t=e.toneRules.map(s.l);return{...e,assignmentRules:t}}return{...e,assignmentRules:[]}}(o||{...a});return o=e,e}async function u(e,t){let n=function(e){var t,n;let r=[];if(e.voiceProfiles&&0!==e.voiceProfiles.length){let t=e.voiceProfiles.filter(e=>e.isDefault).length;0===t?r.push("Exactly one voice profile must be marked as default"):t>1&&r.push("Only one voice profile can be marked as default"),e.voiceProfiles.forEach((e,t)=>{e.id&&e.name||r.push("Voice profile ".concat(t+1," must have id and name")),(e.characteristics.formality<0||e.characteristics.formality>100)&&r.push('Profile "'.concat(e.name,'": Formality must be between 0 and 100')),(e.characteristics.warmth<0||e.characteristics.warmth>100)&&r.push('Profile "'.concat(e.name,'": Warmth must be between 0 and 100')),(e.characteristics.directness<0||e.characteristics.directness>100)&&r.push('Profile "'.concat(e.name,'": Directness must be between 0 and 100')),(e.characteristics.energy<0||e.characteristics.energy>100)&&r.push('Profile "'.concat(e.name,'": Energy must be between 0 and 100')),(e.characteristics.detailLevel<0||e.characteristics.detailLevel>100)&&r.push('Profile "'.concat(e.name,'": Detail level must be between 0 and 100')),(e.characteristics.riskPosture<0||e.characteristics.riskPosture>100)&&r.push('Profile "'.concat(e.name,'": Risk posture must be between 0 and 100'))})}else r.push("At least one voice profile is required");e.brand&&e.brand.sliders&&((e.brand.sliders.formality<0||e.brand.sliders.formality>100)&&r.push("Formality slider must be between 0 and 100"),(e.brand.sliders.warmth<0||e.brand.sliders.warmth>100)&&r.push("Warmth slider must be between 0 and 100"),(e.brand.sliders.directness<0||e.brand.sliders.directness>100)&&r.push("Directness slider must be between 0 and 100"),(e.brand.sliders.energy<0||e.brand.sliders.energy>100)&&r.push("Energy slider must be between 0 and 100"),(e.brand.sliders.detailLevel<0||e.brand.sliders.detailLevel>100)&&r.push("Detail level slider must be between 0 and 100"),(e.brand.sliders.riskPosture<0||e.brand.sliders.riskPosture>100)&&r.push("Risk posture slider must be between 0 and 100"));let i=["mentor","peer","guide","administrator","professional","counselor"];i.includes(e.personality.archetype)||r.push("Personality archetype must be one of: ".concat(i.join(", ")));let s=["low","medium","high"];s.includes(e.personality.empathy)||r.push("Empathy must be one of: ".concat(s.join(", ")));let o=["reserved","balanced","cheerful"];for(let n of(o.includes(e.personality.enthusiasm)||r.push("Enthusiasm must be one of: ".concat(o.join(", "))),e.assignmentRules||[]))n.id||r.push("Assignment rules must have id"),n.scope&&["user","group","agent","app"].includes(n.scope)||r.push('Assignment rule "'.concat(n.id,'" must have a valid scope (user, group, agent, or app)')),n.targetId&&n.targetLabel||r.push('Assignment rule "'.concat(n.id,'" must have targetId and targetLabel')),n.profileId||r.push('Assignment rule "'.concat(n.id,'" must have a profileId')),(null===(t=e.voiceProfiles)||void 0===t?void 0:t.find(e=>e.id===n.profileId))||r.push('Assignment rule "'.concat(n.id,'" references a non-existent voice profile')),"number"!=typeof n.order&&r.push('Assignment rule "'.concat(n.id,'" must have an order number'));for(let t of e.toneRules||[])t.id||r.push("Tone rules must have id"),t.scope&&["app","group","user"].includes(t.scope)||r.push('Tone rule "'.concat(t.id,'" must have a valid scope (app, group, or user)')),t.targetId&&t.targetLabel||r.push('Tone rule "'.concat(t.id,'" must have targetId and targetLabel')),t.profileId||r.push('Tone rule "'.concat(t.id,'" must have a profileId')),(null===(n=e.voiceProfiles)||void 0===n?void 0:n.find(e=>e.id===t.profileId))||r.push('Tone rule "'.concat(t.id,'" references a non-existent voice profile')),"number"!=typeof t.order&&r.push('Tone rule "'.concat(t.id,'" must have an order number'));return r}(e);if(n.length>0)throw Error("Validation failed: ".concat(n.join(", ")));let r={...e,updatedAt:new Date().toISOString(),updatedBy:t};return o=r,r}let c=i.createContext(null);function d(e){let{children:t}=e,[n,o]=i.useState(null),[a,d]=i.useState(!0),[f,p]=i.useState(!1),[m,h]=i.useState(null);async function g(){try{d(!0),h(null);let e=await l(),t=function(e){if(e.assignmentRules&&e.assignmentRules.length>0)return e;if(e.toneRules&&e.toneRules.length>0){let t=e.toneRules.map(s.l);return{...e,assignmentRules:t}}return{...e,assignmentRules:[]}}(e);o(t)}catch(e){console.error("Error loading communication config:",e),h(e instanceof Error?e.message:"Failed to load Voice & Tone config")}finally{d(!1)}}async function v(){if(n){p(!0),h(null);try{let e=await u(n);o(e)}catch(e){throw console.error("Error saving communication config:",e),h(e instanceof Error?e.message:"Failed to save Voice & Tone config"),e}finally{p(!1)}}}return i.useEffect(()=>{g()},[]),(0,r.jsx)(c.Provider,{value:{config:n,loading:a,saving:f,error:m,updateProfiles:function(e){n&&o({...n,voiceProfiles:e})},updateProfile:function(e){n&&o({...n,voiceProfiles:n.voiceProfiles.map(t=>t.id===e.id?e:t)})},updateAssignmentRules:function(e){n&&o({...n,assignmentRules:e})},updateToneRules:function(e){if(!n)return;let t=e.map(s.l);o({...n,assignmentRules:t,toneRules:e})},deleteProfile:function(e){n&&o({...n,voiceProfiles:n.voiceProfiles.filter(t=>t.id!==e),assignmentRules:(n.assignmentRules||[]).filter(t=>t.profileId!==e),toneRules:(n.toneRules||[]).filter(t=>t.profileId!==e)})},save:v,reload:g},children:t})}function f(){let e=i.useContext(c);if(!e)throw Error("useVoiceAndTone must be used within VoiceAndToneProvider");return e}},2869:function(e,t,n){n.d(t,{z:function(){return u}});var r=n(7437),i=n(2265),s=n(7495),o=n(535),a=n(4508);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=i.forwardRef((e,t)=>{let{className:n,variant:i,size:o,asChild:u=!1,...c}=e,d=u?s.g7:"button";return(0,r.jsx)(d,{className:(0,a.cn)(l({variant:i,size:o,className:n})),ref:t,...c})});u.displayName="Button"},7604:function(e,t,n){n.d(t,{FontAwesomeIcon:function(){return i}});var r=n(7437);function i(e){let{icon:t,className:n="",size:i,style:s,"aria-hidden":o=!0}=e,a="".concat(t," ").concat(n).trim();return(0,r.jsx)("span",{style:{display:"contents",...s},"aria-hidden":o,children:(0,r.jsx)("i",{className:a,suppressHydrationWarning:!0})})}},5186:function(e,t,n){n.d(t,{I:function(){return o}});var r=n(7437),i=n(2265),s=n(4508);let o=i.forwardRef((e,t)=>{let{className:n,type:i,...o}=e;return(0,r.jsx)("input",{type:i,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...o})});o.displayName="Input"},3360:function(e,t,n){n.d(t,{l:function(){return r}});function r(e){let t="app";return"user"===e.scope?t="user":"group"===e.scope?t="group":"app"===e.scope&&(t="app"),{id:e.id,profileId:e.profileId,scope:t,targetId:e.targetId,targetLabel:e.targetLabel,channelScope:e.channelScope,order:e.order}}},4508:function(e,t,n){n.d(t,{cn:function(){return s}});var r=n(1994),i=n(3335);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.m6)((0,r.W)(t))}},9376:function(e,t,n){var r=n(5475);n.o(r,"useParams")&&n.d(t,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},8575:function(e,t,n){n.d(t,{F:function(){return s},e:function(){return o}});var r=n(2265);function i(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function s(...e){return t=>{let n=!1,r=e.map(e=>{let r=i(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){let n=r[t];"function"==typeof n?n():i(e[t],null)}}}}function o(...e){return r.useCallback(s(...e),e)}},7495:function(e,t,n){n.d(t,{Z8:function(){return o},g7:function(){return a}});var r=n(2265),i=n(8575),s=n(7437);function o(e){let t=function(e){let t=r.forwardRef((e,t)=>{let{children:n,...s}=e;if(r.isValidElement(n)){let e,o;let a=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.props.ref:n.props.ref||n.ref,l=function(e,t){let n={...t};for(let r in t){let i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{let t=s(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]={...i,...s}:"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}(s,n.props);return n.type!==r.Fragment&&(l.ref=t?(0,i.F)(t,a):a),r.cloneElement(n,l)}return r.Children.count(n)>1?r.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),n=r.forwardRef((e,n)=>{let{children:i,...o}=e,a=r.Children.toArray(i),l=a.find(u);if(l){let e=l.props.children,i=a.map(t=>t!==l?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,s.jsx)(t,{...o,ref:n,children:r.isValidElement(e)?r.cloneElement(e,void 0,i):null})}return(0,s.jsx)(t,{...o,ref:n,children:i})});return n.displayName=`${e}.Slot`,n}var a=o("Slot"),l=Symbol("radix.slottable");function u(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}},535:function(e,t,n){n.d(t,{j:function(){return o}});var r=n(1994);let i=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=r.W,o=(e,t)=>n=>{var r;if((null==t?void 0:t.variants)==null)return s(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:o,defaultVariants:a}=t,l=Object.keys(o).map(e=>{let t=null==n?void 0:n[e],r=null==a?void 0:a[e];if(null===t)return null;let s=i(t)||i(r);return o[e][s]}),u=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{});return s(e,l,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...i}=t;return Object.entries(i).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...a,...u}[t]):({...a,...u})[t]===n})?[...e,n,r]:e},[]),null==n?void 0:n.class,null==n?void 0:n.className)}}}]);